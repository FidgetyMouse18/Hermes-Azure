# Network Configuration
CONFIG_NETWORKING=y
CONFIG_NET_LOG=y
CONFIG_NET_IPV4=y
CONFIG_NET_TCP=y
CONFIG_NET_SOCKETS=y
# CONFIG_NET_SOCKETS_SOCKOPT_TLS=y  # Disabled for non-secure connection

# WiFi Configuration for disco l475 iot1
CONFIG_WIFI=y
CONFIG_WIFI_ESWIFI=y
CONFIG_WIFI_ESWIFI_BUS_SPI=y
CONFIG_NET_L2_WIFI_MGMT=y
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT_STACK_SIZE=2048

# Network Connection Manager
CONFIG_NET_CONNECTION_MANAGER=y
CONFIG_NET_IF_UNICAST_IPV4_ADDR_COUNT=3

# DHCP Client
CONFIG_NET_DHCPV4=y

# MQTT Configuration
CONFIG_MQTT_LIB=y
# CONFIG_MQTT_LIB_TLS=y  # Disabled for non-secure connection

# TLS/Security Configuration (disabled for simplicity)
# CONFIG_MBEDTLS=y
# CONFIG_MBEDTLS_BUILTIN=y
# CONFIG_MBEDTLS_ENABLE_HEAP=y
# CONFIG_MBEDTLS_HEAP_SIZE=65536
# CONFIG_MBEDTLS_SSL_MAX_CONTENT_LEN=16384
# CONFIG_MBEDTLS_PEM_CERTIFICATE_FORMAT=y
# CONFIG_MBEDTLS_SERVER_NAME_INDICATION=y

# JSON Support
CONFIG_JSON_LIBRARY=y

# Sensor Configuration
CONFIG_SENSOR=y
CONFIG_HTS221=y

# LED Support
CONFIG_LED=y
CONFIG_GPIO=y

# System Configuration
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096
CONFIG_NET_TX_STACK_SIZE=2048
CONFIG_NET_RX_STACK_SIZE=2048

# Debugging and Logging
CONFIG_LOG=y
CONFIG_PRINTK=y
# CONFIG_POSIX_API is not set

# Network Buffers - Optimized for WiFi
CONFIG_NET_PKT_RX_COUNT=32
CONFIG_NET_PKT_TX_COUNT=16
CONFIG_NET_BUF_RX_COUNT=64
CONFIG_NET_BUF_TX_COUNT=32
CONFIG_NET_BUF_DATA_SIZE=256

# WiFi Specific Tuning
CONFIG_WIFI_ESWIFI_THREAD_PRIO=5
CONFIG_NET_SOCKETS_POLL_MAX=4
CONFIG_NET_TCP_RECV_QUEUE_TIMEOUT=3000
CONFIG_NET_SOCKETS_CONNECT_TIMEOUT=30000
CONFIG_NET_TCP_TIME_WAIT_DELAY=3000

# Device Hostname
CONFIG_NET_HOSTNAME_ENABLE=y

# Entropy and Random Number Generation
CONFIG_ENTROPY_GENERATOR=y
CONFIG_TEST_RANDOM_GENERATOR=y

# Application specific configs
CONFIG_NET_SAMPLE_MQTT_PUBLISH_INTERVAL=5
CONFIG_NET_SAMPLE_MQTT_PAYLOAD_SIZE=512
CONFIG_NET_SAMPLE_MQTT_BROKER_HOSTNAME="192.168.0.253"
CONFIG_NET_SAMPLE_MQTT_BROKER_PORT="1883"
CONFIG_NET_SAMPLE_MQTT_PUB_TOPIC="disco/sensors"
CONFIG_NET_SAMPLE_MQTT_SUB_TOPIC_CMD="disco/commands"
CONFIG_NET_SAMPLE_MQTT_QOS_1_AT_LEAST_ONCE=y
CONFIG_WIFI_SSID="csse4011"
CONFIG_WIFI_PASSWORD="csse4011wifi"

# Disable ESWIFI Power Save Mode for more stable connection
# CONFIG_ESWIFI_PS_MODE_DISABLED=y # This was incorrect
CONFIG_PM_DEVICE=n # Try disabling general device power management

# Network Samples
# CONFIG_NET_SAMPLE_APP_MAX_ITERATIONS=-1 # This was incorrect, removing duplicate
# Network Connectivity Manager
CONFIG_NET_CONNECTION_MANAGER=y